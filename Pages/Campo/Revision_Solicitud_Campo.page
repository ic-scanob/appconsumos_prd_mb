{
	"Controls": [
		{
			"FilterFeedbackBar": {
				"ShowAllFilters": false,
				"_Type": "Control.Type.FilterFeedbackBar"
			},
			"_Type": "Control.Type.SectionedTable",
			"Target": "/appconsumos_mb/Rules/Campo/Target_Materiales_Revision_Campo.js",
			"_Name": "SectionedTable0",
			"Sections": [
				{
					"Separators": {
						"TopSectionSeparator": false,
						"BottomSectionSeparator": true,
						"HeaderSeparator": true,
						"FooterSeparator": true,
						"ControlSeparator": true
					},
					"Controls": [
						{
							"_Type": "Control.Type.FormCell.Note",
							"_Name": "comentarios_aux",
							"IsVisible": true,
							"Separator": true,
							"Caption": "Observaciones",
							"PlaceHolder": "Ingresa observaciones de la revisión",
							"MinNumberOfLines": 3,
							"Enabled": true,
							"IsEditable": true
						}
					],
					"Layout": {
						"NumberOfColumns": 1
					},
					"Visible": true,
					"EmptySection": {
						"FooterVisible": false
					},
					"_Type": "Section.Type.FormCell",
					"_Name": "SectionFormCell0"
				},
				{
					"Separators": {
						"TopSectionSeparator": false,
						"BottomSectionSeparator": true,
						"HeaderSeparator": true,
						"FooterSeparator": true,
						"ControlSeparator": true
					},
					"Controls": [
						{
							"_Type": "Control.Type.FormCell.ListPicker",
							"_Name": "operacion",
							"IsVisible": true,
							"Separator": true,
							"AllowMultipleSelection": false,
							"AllowEmptySelection": true,
							"Caption": "Operación *",
							"DataPaging": {
								"ShowLoadingIndicator": false,
								"PageSize": 50
							},
							"PickerPrompt": "Selecciona una operación",
							"PlaceHolder": "Selecciona una operación",
							"HelperText": "La operación seleccionada se aplicará a todos los materiales de la solicitud. Si algún material requiere una operación diferente, selecciona 'Aprobar por ítems'.",
							"IsSelectedSectionEnabled": false,
							"IsPickerDismissedOnSelection": true,
							"AllowDefaultValueIfOneItem": true,
							"IsEditable": true,
							"PickerItems": {
								"Target": {
									"Service": "/appconsumos_mb/Services/app_consumos_prd.service",
									"EntitySet": "OperacionesOrden",
									"QueryOptions": "$filter=orden_orden eq '{orden}'",
									"ReadLink": "{@odata.readLink}"
								},
								"ObjectCell": {
									"AvatarStack": {
										"ImageIsCircular": false
									},
									"PreserveIconStackSpacing": false,
									"Subhead": "{op_desc}",
									"Title": "{op_number}",
									"Visible": true
								},
								"ReturnValue": "{op_number}"
							}
						}
					],
					"Layout": {
						"NumberOfColumns": 1
					},
					"Visible": true,
					"EmptySection": {
						"FooterVisible": false
					},
					"_Type": "Section.Type.FormCell",
					"_Name": "SectionFormCell3"
				},
				{
					"Separators": {
						"TopSectionSeparator": false,
						"BottomSectionSeparator": false,
						"HeaderSeparator": true,
						"FooterSeparator": false,
						"ControlSeparator": false
					},
					"Layout": {
						"LayoutType": "Horizontal",
						"HorizontalAlignment": "Trailing"
					},
					"_Type": "Section.Type.ButtonTable",
					"_Name": "SectionButtonTable1",
					"Visible": true,
					"EmptySection": {
						"FooterVisible": false
					},
					"Buttons": [
						{
							"Styles": {
								"Image": "ButtonText2",
								"Button": "ButtonText2"
							},
							"_Type": "ButtonTable.Type.Button",
							"_Name": "ButtonTableTypeButton4",
							"Alignment": "Right",
							"ButtonType": "Text",
							"Semantic": "Tint",
							"Image": "sap-icon://message-information",
							"ImagePosition": "Leading",
							"FullWidth": false,
							"Visible": true,
							"Enabled": true,
							"OnPress": {
								"Name": "/appconsumos_mb/Actions/GenericMessageBox.action",
								"Properties": {
									"Message": "Para aprobar o rechazar ítems individualmente, haz clic en \"Aprobar por ítems\". Si no, puedes gestionar toda la solicitud directamente.",
									"Title": "Información",
									"OKCaption": "Aceptar"
								}
							}
						},
						{
							"Styles": {
								"Image": "Button",
								"Button": "Button"
							},
							"_Type": "ButtonTable.Type.Button",
							"_Name": "ButtonTableTypeButton3",
							"Title": "Aprobar por Ítems",
							"Alignment": "Right",
							"ButtonType": "Primary",
							"Semantic": "Tint",
							"Image": "sap-icon://survey",
							"ImagePosition": "Leading",
							"FullWidth": false,
							"Visible": true,
							"Enabled": true,
							"OnPress": "/appconsumos_mb/Rules/Campo/setVisible_ConModificaciones.js"
						}
					]
				},
				{
					"Separators": {
						"TopSectionSeparator": false,
						"BottomSectionSeparator": false,
						"HeaderSeparator": true,
						"FooterSeparator": true,
						"ControlSeparator": false
					},
					"Controls": [
						{
							"_Type": "Control.Type.FormCell.Label",
							"_Name": "FormCellLabel0",
							"IsVisible": true,
							"Separator": true,
							"Text": "Revisión de Materiales",
							"TextWrap": true
						},
						{
							"_Type": "Control.Type.FormCell.ListPicker",
							"_Name": "materiales_solicitud",
							"IsVisible": true,
							"Separator": true,
							"AllowMultipleSelection": false,
							"AllowEmptySelection": true,
							"Caption": "Materiales Solicitud",
							"DataPaging": {
								"ShowLoadingIndicator": true,
								"PageSize": 50
							},
							"PickerPrompt": "Selecciona un material",
							"HelperText": "Selecciona un material de la solicitud",
							"OnValueChange": "/appconsumos_mb/Rules/Campo/onChange_MaterialesRevision.js",
							"IsSelectedSectionEnabled": false,
							"IsPickerDismissedOnSelection": true,
							"AllowDefaultValueIfOneItem": false,
							"IsEditable": true,
							"Search": {
								"Mode": "Expandable",
								"AdditionalProperties": [
									"material_material",
									"material/material_desc"
								],
								"Enabled": true,
								"Placeholder": "Buscar Material..."
							},
							"PickerItems": {
								"Target": {
									"Service": "/appconsumos_mb/Services/app_consumos_prd.service",
									"EntitySet": "ComponentesSolicitud",
									"QueryOptions": "/appconsumos_mb/Rules/Campo/Query_Detalle_Componentes_Campo.js",
									"ReadLink": "{@odata.readLink}"
								},
								"ObjectCell": {
									"Description": "{material/material_desc}",
									"PreserveIconStackSpacing": false,
									"StatusText": "{almacen_almacen} - {almacen/almacen_desc}",
									"Subhead": "Cant. Solicitada: {cantidad_tomada} {material/und/und_vz}",
									"Title": "/appconsumos_mb/Rules/formatMaterialId.js",
									"Visible": true
								},
								"ReturnValue": "{almacen_almacen} - {material_material} "
							}
						}
					],
					"Layout": {
						"NumberOfColumns": 1
					},
					"Visible": false,
					"EmptySection": {
						"FooterVisible": false
					},
					"_Type": "Section.Type.FormCell",
					"_Name": "SectionFormCell1"
				},
				{
					"Separators": {
						"TopSectionSeparator": false,
						"BottomSectionSeparator": true,
						"HeaderSeparator": true,
						"FooterSeparator": true,
						"ControlSeparator": true
					},
					"Layout": {
						"LayoutType": "Horizontal",
						"HorizontalAlignment": "Center"
					},
					"_Type": "Section.Type.ButtonTable",
					"_Name": "SectionButtonTable0",
					"Visible": false,
					"EmptySection": {
						"FooterVisible": false
					},
					"Buttons": [
						{
							"Styles": {
								"Image": "Button_Eliminar",
								"Button": "Button_Eliminar"
							},
							"_Type": "ButtonTable.Type.Button",
							"_Name": "ButtonTableTypeButton1",
							"Title": "Rechazar",
							"Alignment": "Center",
							"ButtonType": "Primary",
							"Semantic": "Tint",
							"Image": "sap-icon://sys-cancel",
							"ImagePosition": "Leading",
							"FullWidth": false,
							"Visible": true,
							"Enabled": true,
							"OnPress": "/appconsumos_mb/Rules/Campo/Rechazar_Material_Revision_Campo.js"
						},
						{
							"Styles": {
								"Image": "Button",
								"Button": "Button"
							},
							"_Type": "ButtonTable.Type.Button",
							"_Name": "ButtonTableTypeButton0",
							"Title": "Aprobar",
							"Alignment": "Center",
							"ButtonType": "Primary",
							"Semantic": "Tint",
							"Image": "sap-icon://accept",
							"ImagePosition": "Leading",
							"FullWidth": false,
							"Visible": true,
							"Enabled": true,
							"OnPress": "/appconsumos_mb/Rules/Campo/setVisible_CantAprobadaRevision.js"
						}
					]
				},
				{
					"Separators": {
						"TopSectionSeparator": false,
						"BottomSectionSeparator": true,
						"HeaderSeparator": false,
						"FooterSeparator": true,
						"ControlSeparator": true
					},
					"Controls": [
						{
							"_Type": "Control.Type.FormCell.Label",
							"_Name": "FormCellLabel1",
							"IsVisible": true,
							"Separator": true,
							"Text": "Cantidad Solicitada ",
							"TextWrap": true
						},
						{
							"_Type": "Control.Type.FormCell.SimpleProperty",
							"_Name": "cantidad_revision",
							"IsVisible": true,
							"Separator": true,
							"Caption": "Cantidad a Aprobar",
							"PlaceHolder": "Ingresa la cantidad a aprobar para este material",
							"KeyboardType": "Number",
							"AlternateInput": "None",
							"HelperText": "Haz clic en 'Agregar Material' para confirmar la revisión del material",
							"Enabled": true,
							"IsEditable": true
						},
						{
							"_Type": "Control.Type.FormCell.ListPicker",
							"_Name": "operacion_item",
							"IsVisible": true,
							"Separator": true,
							"AllowMultipleSelection": false,
							"AllowEmptySelection": true,
							"Caption": "Operación *",
							"DataPaging": {
								"ShowLoadingIndicator": false,
								"PageSize": 50
							},
							"PickerPrompt": "Selecciona una operación",
							"PlaceHolder": "Selecciona una operación",
							"HelperText": "Esta operación se asignará al material que seleccionaste.",
							"IsSelectedSectionEnabled": false,
							"IsPickerDismissedOnSelection": true,
							"IsSearchCancelledAfterSelection": false,
							"AllowDefaultValueIfOneItem": true,
							"IsEditable": true,
							"PickerItems": {
								"Target": {
									"Service": "/appconsumos_mb/Services/app_consumos_prd.service",
									"EntitySet": "OperacionesOrden",
									"QueryOptions": "$filter=orden_orden eq '{orden}'",
									"ReadLink": "{@odata.readLink}"
								},
								"ObjectCell": {
									"AvatarStack": {
										"ImageIsCircular": false
									},
									"PreserveIconStackSpacing": false,
									"Subhead": "{op_desc}",
									"Title": "{op_number}",
									"Visible": true
								},
								"ReturnValue": "{op_number}"
							}
						},
						{
							"_Type": "Control.Type.FormCell.Button",
							"_Name": "FormCellButton1",
							"IsVisible": true,
							"Separator": true,
							"Styles": {
								"Image": "Button",
								"Button": "Button"
							},
							"Title": "Agregar Material",
							"Alignment": "Right",
							"ButtonType": "Primary",
							"Semantic": "Tint",
							"Image": "sap-icon://add-product",
							"ImagePosition": "Leading",
							"Enabled": true,
							"OnPress": "/appconsumos_mb/Rules/Campo/Agregar_Material_Revision_Campo.js"
						},
						{
							"_Type": "Control.Type.FormCell.Button",
							"_Name": "FormCellButton4",
							"IsVisible": true,
							"Separator": true,
							"Styles": {
								"Image": "Button_Eliminar",
								"Button": "Button_Eliminar"
							},
							"Title": "Rechazar",
							"Alignment": "Right",
							"ButtonType": "Primary",
							"Semantic": "Negative",
							"Image": "sap-icon://sys-cancel",
							"ImagePosition": "Leading",
							"Enabled": true,
							"OnPress": "/appconsumos_mb/Rules/Campo/Rechazar_Material_Revision_Campo.js"
						}
					],
					"Layout": {
						"NumberOfColumns": 1
					},
					"Visible": false,
					"EmptySection": {
						"FooterVisible": false
					},
					"_Type": "Section.Type.FormCell",
					"_Name": "SectionFormCell2"
				},
				{
					"Header": {
						"_Type": "SectionCommon.Type.Header",
						"_Name": "SectionCommonTypeHeader0",
						"AccessoryType": "None",
						"UseTopPadding": true,
						"Caption": "Materiales de la Revisión"
					},
					"Separators": {
						"TopSectionSeparator": false,
						"BottomSectionSeparator": true,
						"HeaderSeparator": true,
						"FooterSeparator": true,
						"ControlSeparator": true
					},
					"Grouping": {
						"GroupingProperties": [],
						"Header": {
							"Items": []
						}
					},
					"_Type": "Section.Type.ObjectTable",
					"Target": "/appconsumos_mb/Rules/Campo/Target_Materiales_Revision_Campo.js",
					"_Name": "SectionObjectTable0",
					"Visible": false,
					"EmptySection": {
						"Caption": "No hay elementos para mostrar",
						"FooterVisible": false
					},
					"ObjectCell": {
						"ContextMenu": {
							"Items": [],
							"PerformFirstActionWithFullSwipe": true,
							"LeadingItems": [],
							"TrailingItems": [],
							"_Type": "ObjectCell.Type.ContextMenu"
						},
						"Title": "/appconsumos_mb/Rules/formatMaterialId.js",
						"Subhead": "Tomado de: {almacen_almacen}",
						"Description": "{material/material_desc}",
						"DisplayDescriptionInMobile": true,
						"StatusText": "Op: {operacion}",
						"SubstatusText": "Cant apro: {cant} de {cantidad_tomada} {material/und/und_vz}",
						"PreserveIconStackSpacing": false,
						"AccessoryType": "None",
						"AccessoryButtonIcon": "sap-icon://delete",
						"Tags": [
							{
								"Color": "/appconsumos_mb/Rules/Color_Aprobado_Solicitud.js",
								"Text": "{aprobado}"
							}
						],
						"AvatarStack": {
							"Avatars": [
								{
									"Image": "sap-icon://product"
								}
							],
							"ImageIsCircular": true,
							"ImageHasBorder": false
						},
						"AvatarGrid": {
							"Avatars": [],
							"ImageIsCircular": true
						},
						"OnAccessoryButtonPress": "/appconsumos_mb/Rules/Campo/Borrar_Materiales_Revision_Campo.js",
						"_Type": "ObjectTable.Type.ObjectCell",
						"Selected": false
					},
					"DataPaging": {
						"ShowLoadingIndicator": false,
						"PageSize": 50
					},
					"HighlightSelectedItem": false,
					"Selection": {
						"ExitOnLastDeselect": true,
						"LongPressToEnable": "None",
						"Mode": "None"
					}
				}
			]
		}
	],
	"_Type": "Page",
	"_Name": "Revision_Solicitud_Campo",
	"ActionBar": {
		"Items": [
			{
				"_Type": "Control.Type.ActionBarItem",
				"_Name": "ActionBarItem0",
				"Caption": "Item",
				"Icon": "sap-icon://decline",
				"Position": "Right",
				"IsIconCircular": false,
				"Visible": true,
				"OnPress": {
					"Name": "/appconsumos_mb/Actions/GenericMessageBox.action",
					"Properties": {
						"Message": "¿Seguro que desea cancelar la revisión? Se perderán todos los datos registrados",
						"Title": "Confirmación",
						"OKCaption": "Aceptar",
						"OnOK": {
							"Name": "/appconsumos_mb/Actions/CloseModalPage_Cancel.action",
							"Properties": {
								"NavigateBackToPage": "Detalle_Solicitudes_Campo"
							}
						},
						"CancelCaption": "Cancelar"
					}
				}
			}
		],
		"_Name": "ActionBar0",
		"_Type": "Control.Type.ActionBar",
		"Caption": "Revisión Solicitud Campo"
	},
	"FioriToolbar": {
		"_Type": "Control.Type.FioriToolbar",
		"_Name": "FioriToolbar0",
		"Visible": true,
		"Items": [
			{
				"_Type": "FioriToolbarItem.Type.Button",
				"_Name": "ToolbarItem0",
				"Visible": true,
				"Title": "Confirmar",
				"Styles": {
					"Image": "Button2",
					"Button": "Button2"
				},
				"OnPress": "/appconsumos_mb/Rules/Campo/ConfirmarSolicitudCampo.js",
				"Enabled": true,
				"ButtonType": "Primary",
				"Semantic": "Tint",
				"ImagePosition": "Leading"
			},
			{
				"_Type": "FioriToolbarItem.Type.Button",
				"_Name": "ToolbarItem1",
				"Visible": true,
				"Title": "Rechazar",
				"Styles": {
					"Image": "Button_Eliminar",
					"Button": "Button_Eliminar"
				},
				"OnPress": "/appconsumos_mb/Rules/Campo/RechazarSolicitudCampo.js",
				"Enabled": true,
				"ButtonType": "Primary",
				"Semantic": "Tint",
				"ImagePosition": "Leading"
			}
		]
	}
}